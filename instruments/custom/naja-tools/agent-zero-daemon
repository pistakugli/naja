#!/bin/bash
# Agent Zero Daemon - Runs continuously in background

export PYTHONPATH="/opt/naja/python-packages:$PYTHONPATH"
LOG_FILE="/mnt/user-data/agent-zero.log"

echo "ü§ñ AGENT ZERO DAEMON STARTING..." | tee -a $LOG_FILE
echo "PID: $$" | tee -a $LOG_FILE
echo "Log: $LOG_FILE" | tee -a $LOG_FILE
echo "" | tee -a $LOG_FILE

while true; do
    echo "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ" | tee -a $LOG_FILE
    echo "$(date '+%Y-%m-%d %H:%M:%S') - AUTONOMOUS CYCLE" | tee -a $LOG_FILE
    echo "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ" | tee -a $LOG_FILE
    
    # Run full autonomous cycle
    /usr/local/bin/agent-zero-advanced full 2>&1 | tee -a $LOG_FILE
    
    # Wait before next cycle (5 minutes)
    echo "" | tee -a $LOG_FILE
    echo "‚è∏Ô∏è  Waiting 300s before next cycle..." | tee -a $LOG_FILE
    sleep 300
done
